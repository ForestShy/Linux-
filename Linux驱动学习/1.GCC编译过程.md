## 1.常用编译选项
---
一个 C/C++文件要经过预处理、编译、汇编、链接才能生成可执行文件。
![[Linux驱动学习/附件/1-1.png]]
在日常交流中通常将"编译"统称为这四个步骤。
通过不同的 gcc 命令能控制这些过程：

```
1. gcc -E -o hello.i hello.c   //预处理，把宏定义展开生成.i文件
2. gcc -S -o hello.s hello.i   //编译，生成.s的汇编文件
3. gcc -c -o hello.o hello.s   //汇编，把汇编文件生成.o的二进制文件
4. gcc -o hello hello.s        //链接。生成可执行文件
```
#GCC常用编译选项
---
| 常用选项 | 描述                                                   |
| -------- | ------------------------------------------------------ |
| -E       | 预处理，开发过程中想快速确定某个宏可用可以使用“-E -dM” |
| -c       | 把预处理、编译、汇编都做了，但是不链接，只生成.o 文件  |
| -o       | 指定输出文件                                           |
| -I       | 指定头文件目录                                         |
| -L       | 指定链接时库文件目录                                   |
| -l       | 指定链接哪一个库文件                                   |
## 2. 编译多个文件
---
1. 一起编译、链接：
```
gcc -o test main.c sub.c
```
2. 分开编译，统一链接：
```
gcc -c -o main.o main.c
gcc -c -o sub.o sub.c
gcc -o test main.o sub.o
```
### 制作使用动态库
#### 动态库
第一步制作、编译：
```
gcc -c -o main.o main.c
gcc -c -o sub.o sub.c
gcc -shared -o libsub.so sub.o sub2.o sub3.o(可以使用多个.o生成动态库)

```
